---
title: æ­£åˆ™è¡¨è¾¾å¼
date: '2021-12-3'
tags: ['js', 'æ­£åˆ™è¡¨è¾¾å¼']
draft: false
summary: 'æ­£åˆ™è¡¨è¾¾å¼æ•´ç†'
---

<TOCInline toc={props.toc} exclude="Overview" asDisclosure />

## mdn æ­£åˆ™è¡¨è¾¾å¼

[æ­£åˆ™è¡¨è¾¾å¼](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_Expressions)

## dotAll æ ‡å¿—

æ­£åˆ™è¡¨è¾¾å¼ä¸­ç”¨äºåŒ¹é…ä»»æ„å­—ç¬¦çš„ç‚¹ï¼ˆ.ï¼‰ä¸åŒ¹é…æ¢è¡Œç¬¦ï¼Œæ¯”å¦‚\n å’Œ\r æˆ–é BMP å­—ç¬¦ï¼Œå¦‚è¡¨æƒ…ç¬¦å·ã€‚

```js:æ²¡æœ‰sæ ‡è¯†ç¬¦
const text = `
foo
bar
`
const re = /foo.bar/;
console.log(re.test(text)); // false
```

ä¸ºæ­¤ï¼Œè§„èŒƒæ–°å¢äº† s æ ‡å¿—ï¼ˆæ„æ€æ˜¯å•è¡Œï¼Œsinglelineï¼‰ï¼Œä»è€Œè§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼š

```js:æ·»åŠ sæ ‡è¯†ç¬¦
const text = `
foo
bar
`
const re = /foo.bar/s;
console.log(re.test(text)); // true
```

## å‘å‰æŸ¥æ‰¾

æ­£åˆ™è¡¨è¾¾å¼æ”¯æŒè‚¯å®šå¼å‘å‰æŸ¥æ‰¾æ–­è¨€å’Œå¦å®šå¼å‘å‰æŸ¥æ‰¾æ–­è¨€ï¼Œå¯ä»¥åŒ¹é…åè·ŸæŒ‡å®šå­—ç¬¦ä¸²çš„è¡¨è¾¾å¼ï¼š

```js:å‘å‰æŸ¥æ‰¾æ–­è¨€ï¼ˆæŸ¥æ‰¾æŸä¸ªè§„åˆ™å‰çš„ï¼‰

const text = 'foobar';
// `è‚¯å®šå¼å‘å‰æŸ¥æ‰¾` åŒ¹é…barå‰é¢çš„foo
const barFrontRegT = /foo(?=bar)/
console.log(barFrontRegT.exec(text)) // ['foo', index: 0, input: 'foobar', groups: undefined]

// `å¦å®šå¼å‘å‰æŸ¥æ‰¾` åŒ¹é…é™¤äº†bar å‰é¢çš„foo
const barFrontRegF = /foo(?!bar)/
console.log(bazFrontRegF.exec(text)) // ['foo', index: 0, input: 'foobar', groups: undefined]

```

## å‘åæŸ¥æ‰¾

```js:å‘åæŸ¥æ‰¾æ–­è¨€ï¼ˆæŸ¥æ‰¾æŸä¸ªè§„åˆ™åçš„ï¼‰
const text = 'foobar';
// `è‚¯å®šå¼å‘åæŸ¥æ‰¾` æŸ¥æ‰¾fooåé¢çš„bar
const fooBehindT = /(?<=foo)bar/
console.log(barBehindT.exec(text)) // ['bar', index: 0, input: 'foobar', groups: undefined]

// `å¦å®šå¼å‘åæŸ¥æ‰¾` åŒ¹é…é™¤äº†fooåé¢çš„bar ï¼ˆç¬¦åˆè¿”å›barï¼‰

const fooBehindF = /(?<!foo)bar/
console.log(fooBehindF.exec(text)) // null  å› ä¸ºå­—ç¬¦ä¸²barçš„å‰é¢æ˜¯foo



```

## æ‰©å±•( æŸ¥æ‰¾ç»„åˆä½¿ç”¨)

```js:æŸ¥æ‰¾ä¸¤ä¸ªç›®æ ‡çš„å­—ç¬¦ä¸²ï¼š
const extractReg = /(?<=(https|http):\/\/).+(?=\.com)/

extractReg.exec(`https://xxx.xxx.xxx.asds.com/xx?a=123`) // `åŒ¹é…https://æˆ–http://åˆ°.comä¹‹å‰çš„æ–‡æœ¬`

```

```js:åŒ¹é…åƒåˆ†ä½ï¼ˆç›¸å½“äºè§„åˆ™å†…æ’å…¥å­—ç¬¦ï¼‰
/*
/(?!^)/: å­—ç¬¦ä¸²å¤´éƒ¨ä¸èƒ½æ˜¯ç©º

 /(?=(\d{3})+$)/g :åŒ¹é…  xxx(?=æ•°å­—*3çš„å€æ•°ç»“å°¾)æ¯æ¬¡åŒ¹é…çš„ç»“æœæ˜¯xxx

*/
const regex = /(?!^)(?=(\d{3})+(\.|$))/g;
"123456.12".replace(regex, ','); // "123,456.12"
"123456".replace(regex, ','); // "123,456"


// å­—ç¬¦ä¸²æ’å…¥


å…ˆè¡Œæ–­è¨€ã€åè¡Œæ–­è¨€è§„å¾‹ï¼š
1.'<'å·ä»£è¡¨ è¦åŒ¹é…çš„å†…å®¹åœ¨å
2.'='ä»£è¡¨åŒ¹é…æ˜¯xxxçš„ï¼Œ'!'ä»£è¡¨ä¸æ˜¯xxxçš„è§„åˆ™
ğŸŒ°ï¼š(?<=123)xx(?=234) åŒ¹é…å‰é¢æ˜¯123åé¢æ˜¯234çš„xx
ğŸŒ°ï¼š(?<!123)xx(?!234) åŒ¹é…å‰é¢ä¸æ˜¯123åé¢ä¸æ˜¯234çš„xx
```

## æ•è·ç»„

```js:å¸¸è§„æ•è·
    const text = '2021-12-3';
    const re = /(\d+)-(\d+)-(\d+)/;
    console.log(re.exec(text));
    //['2021-12-3', '2021', '12', '3', index: 0, input: '2021-12-3', groups: undefined]
```

```js:æ•è·å‘½å
const text = '2021-12-3';
const re = /(?<year>\d+)-(?<month>\d+)-(?<day>\d+)/;
console.log(re.exec(text).groups);
// {year: '2021', month: '12', day: '3'}

```
